# OSC工具对比

## 1、存在的工具
针对MySQL，当前比较流行的在线表结构变更工具有如下几款：

- [gh-ost](https://github.com/github/gh-ost)
- [pt-osc](https://www.percona.com/doc/percona-toolkit/3.0/pt-online-schema-change.html)
- [facebook`osc](http://bazaar.launchpad.net/~mysqlatfacebook/mysqlatfacebook/tools/annotate/head:/osc/OnlineSchemaChange.php)

## 2、通用逻辑

- Create a new, empty table, in the likeness of the original table. We title this the ghost table.
- 创建一个新表，表结构与待更新的一致，新建的表通常叫做 **影子表**
- ALTER the ghost table. Since the table is empty, there is no overhead to this operation.
- 在影子表上做修改表结构。表是空的，所以变更表结构的操作会很快
- Validate the structural change is compatible with tooling requirements.
- Analyze the diff.
- Begin a long running process of copying existing rows from the original tables to the ghost table. Rows are copied in small batches.
- Capture or react to ongoing changes to the original table, and continuously apply them onto the ghost table.
- Monitor general database and replication metric, and throttle so as to prioritize production traffic as needed.
- When the existing data copy is complete, the migration is generally considered as ready to cut-over, give or take some small backlog or state of the replication topology.
- Final step is the cut-over: renaming away of the original table, and renaming the ghost table in its place. Up to some locking or small table outage time, the users and apps are largely ignorant that the table has been swapped under their feet.


## 3、通用逻辑
